{"version":3,"file":"index.m.js","sources":["../components/Item.tsx","../components/Grid.tsx"],"sourcesContent":["import React from 'react'\nimport { useSpring, useTransition } from 'react-spring'\nimport { ObjectOf, UnwrapArray } from '../generics'\n\ntype style = UnwrapArray<ReturnType<typeof useTransition>>['props']\n\nexport interface RendererProps<T> {\n  data: T\n  style: style\n}\n\nexport interface Props<T> {\n  renderer: React.ComponentType<RendererProps<T>>\n  data: T\n  x: number\n  y: number\n  style: style\n}\n\nexport function Item<T>({ renderer: Renderer, data, style, x, y }: Props<T>) {\n  const position = useSpring({\n    left: `${x}px`,\n    top: `${y}px`\n  })\n\n  return <Renderer data={data} style={{ ...style, ...position }} />\n}\n","import React, { useRef } from 'react'\nimport { useTransition } from 'react-spring'\nimport useMeasure from 'use-measure'\n\nimport { Item, Props as ItemProps } from './Item'\nimport { ObjectOf, Component } from '../generics'\n\ntype useTransitionParams = Parameters<typeof useTransition>\nexport interface RequiredItemFields {\n  width: number\n  height: number\n}\n\nexport interface Props<T extends RequiredItemFields> extends ObjectOf<any> {\n  items: T[]\n  keys: useTransitionParams[1]\n  renderer: ItemProps<T>['renderer']\n  wrapper?: Component\n  columnGap?: number\n  rowGap?: number\n}\n\nexport function Grid<T extends RequiredItemFields>({\n  items,\n  keys,\n  renderer: ItemRenderer,\n  wrapper: Component = 'section',\n  style,\n  columnGap = 0,\n  rowGap = 0,\n  ...props\n}: Props<T>) {\n  const transition = useTransition<T, React.CSSProperties>(items, keys, {\n    from: { opacity: 0, position: 'absolute' },\n    enter: { opacity: 1 },\n    leave: { opacity: 0 }\n  })\n\n  const containerRef = useRef(null)\n  const { width: containerWidth } = useMeasure(containerRef)\n\n  let x = 0\n  let y = 0\n  let tallestInRow = 0\n\n  return (\n    <Component\n      ref={containerRef}\n      style={{ ...style, position: 'relative' }}\n      {...props}\n    >\n      {transition.map(({ item, key, props }, index) => {\n        const currentX = x\n        const currentY = y\n\n        x += item.width + columnGap\n        if (item.height > tallestInRow) {\n          tallestInRow = item.height\n        }\n\n        // if end of the item is past the end of the container\n        if (x + item.width > containerWidth) {\n          y += tallestInRow + rowGap\n          tallestInRow = 0\n          x = 0\n        }\n\n        return (\n          <Item<T>\n            key={key}\n            renderer={ItemRenderer}\n            data={item}\n            style={{ ...props, width: item.width, height: item.height }}\n            x={currentX}\n            y={currentY}\n          />\n        )\n      })}\n    </Component>\n  )\n}\n"],"names":["Item","ref","position","useSpring","left","top","React","Renderer","data","style","Object","Grid","transition","useTransition","items","keys","from","opacity","enter","leave","containerRef","useRef","useMeasure","x","y","tallestInRow","Component","props","map","index","currentX","currentY","item","height","width","columnGap","containerWidth","rowGap","key","renderer","ItemRenderer"],"mappings":"kIAmBgBA,EAAQC,uCAChBC,EAAWC,EAAU,CACzBC,cACAC,sBAGKC,gBAACC,GAASC,KAAMA,EAAMC,MAAOC,iBAAKD,EAAUP,cCHrCS,EAAmCV,kEAI5B,sDAET,iCACH,yMAGHW,EAAaC,EAAsCC,EAAOC,EAAM,CACpEC,KAAM,CAAEC,QAAS,EAAGf,SAAU,YAC9BgB,MAAO,CAAED,QAAS,GAClBE,MAAO,CAAEF,QAAS,KAGdG,EAAeC,EAAO,QACMC,EAAWF,SAEzCG,EAAI,EACJC,EAAI,EACJC,EAAe,SAGjBnB,gBAACoB,iBACCzB,IAAKmB,EACLX,MAAOC,iBAAKD,GAAOP,SAAU,cACzByB,GAEHf,EAAWgB,aAAK3B,EAAsB4B,gBAC/BC,EAAWP,EACXQ,EAAWP,SAGbQ,EAAKC,OAASR,IAChBA,EAAeO,EAAKC,SAFtBV,GAAKS,EAAKE,MAAQC,GAMVH,EAAKE,MAAQE,IACnBZ,GAAKC,EAAeY,EACpBZ,EAAe,EACfF,EAAI,GAIJjB,gBAACN,GACCsC,UACAC,SAAUC,EACVhC,KAAMwB,EACNvB,MAAOC,0BAAYwB,MAAOF,EAAKE,MAAOD,OAAQD,EAAKC,SACnDV,EAAGO,EACHN,EAAGO"}