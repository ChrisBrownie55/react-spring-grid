{"version":3,"file":"index.js","sources":["../components/Item.tsx","../components/Grid.tsx"],"sourcesContent":["import React from 'react'\nimport { useSpring, useTransition } from 'react-spring'\nimport { ObjectOf, UnwrapArray } from '../generics'\n\ntype style = UnwrapArray<ReturnType<typeof useTransition>>['props']\n\nexport interface RendererProps<T> {\n  data: T\n  style: style\n  index: number\n}\n\nexport interface Props<T> {\n  renderer: React.ComponentType<RendererProps<T>>\n  data: T\n  x: number\n  y: number\n  style: style\n  index: number\n}\n\nexport function Item<T>({\n  renderer: Renderer,\n  data,\n  style,\n  x,\n  y,\n  index\n}: Props<T>) {\n  const position = useSpring({\n    left: `${x}px`,\n    top: `${y}px`\n  })\n\n  return (\n    <Renderer index={index} data={data} style={{ ...style, ...position }} />\n  )\n}\n","import React, { useRef } from 'react'\nimport { useTransition, UseTransitionProps } from 'react-spring'\nimport useMeasure from 'use-measure'\n\nimport { Item, Props as ItemProps } from './Item'\nimport { ObjectOf, Component } from '../generics'\n\ntype keys<T> =\n  | string\n  | number\n  | readonly (string | number)[]\n  | ((item: T) => string | number)\n  | null\nexport interface RequiredItemFields {\n  width: number\n  height: number\n}\n\nexport interface Props<T extends RequiredItemFields> extends ObjectOf<any> {\n  items: T[]\n  keys: keys<T>\n  renderer: ItemProps<T>['renderer']\n  wrapper?: Component\n  columnGap?: number\n  rowGap?: number\n  transitionProps?: ObjectOf<any>\n}\n\nexport function Grid<T extends RequiredItemFields>({\n  items,\n  keys,\n  renderer: ItemRenderer,\n  wrapper: Component = 'section',\n  style,\n  columnGap = 0,\n  rowGap = 0,\n  transitionProps = {},\n  ...props\n}: Props<T>) {\n  const transition = useTransition<T, React.CSSProperties>(items, keys, {\n    from: { opacity: 0, position: 'absolute' },\n    enter: { opacity: 1 },\n    leave: { opacity: 0 },\n    ...transitionProps\n  })\n\n  const containerRef = useRef(null)\n  const { width: containerWidth } = useMeasure(containerRef)\n\n  let x = 0\n  let y = 0\n  let tallestInRow = 0\n\n  return (\n    <Component\n      ref={containerRef}\n      style={{ ...style, position: 'relative' }}\n      {...props}\n    >\n      {containerWidth\n        ? transition.map(({ item, key, props }, index) => {\n            const currentX = x\n            const currentY = y\n\n            x += item.width + columnGap\n            if (item.height > tallestInRow) {\n              tallestInRow = item.height\n            }\n\n            // if end of the item is past the end of the container\n            if (x + item.width > containerWidth) {\n              y += tallestInRow + rowGap\n              tallestInRow = 0\n              x = 0\n            }\n\n            return (\n              <Item<T>\n                key={key}\n                renderer={ItemRenderer}\n                data={item}\n                index={index}\n                style={{ ...props, width: item.width, height: item.height }}\n                x={currentX}\n                y={currentY}\n              />\n            )\n          })\n        : null}\n    </Component>\n  )\n}\n"],"names":["Item","ref","position","useSpring","left","top","React","Renderer","index","data","style","Object","transition","useTransition","items","keys","from","opacity","enter","leave","containerRef","useRef","useMeasure","x","y","tallestInRow","Component","props","containerWidth","map","currentX","currentY","item","height","width","columnGap","rowGap","key","renderer","ItemRenderer"],"mappings":"mKAqBgBA,EAAQC,iDAQhBC,EAAWC,YAAU,CACzBC,cACAC,sBAIAC,gBAACC,GAASC,MAAOA,EAAOC,KAAMA,EAAMC,MAAOC,iBAAKD,EAAUR,2BCPXD,kEAI5B,sDAET,iCACH,0CACS,4NAGZW,EAAaC,gBAAsCC,EAAOC,EAAMJ,kBACpEK,KAAM,CAAEC,QAAS,EAAGf,SAAU,YAC9BgB,MAAO,CAAED,QAAS,GAClBE,MAAO,CAAEF,QAAS,QAIdG,EAAeC,SAAO,QACMC,EAAWF,SAEzCG,EAAI,EACJC,EAAI,EACJC,EAAe,SAGjBnB,gBAACoB,iBACCzB,IAAKmB,EACLV,MAAOC,iBAAKD,GAAOR,SAAU,cACzByB,GAEHC,EACGhB,EAAWiB,aAAK5B,EAAsBO,gBAC9BsB,EAAWP,EACXQ,EAAWP,SAGbQ,EAAKC,OAASR,IAChBA,EAAeO,EAAKC,SAFtBV,GAAKS,EAAKE,MAAQC,GAMVH,EAAKE,MAAQN,IACnBJ,GAAKC,EAAeW,EACpBX,EAAe,EACfF,EAAI,GAIJjB,gBAACN,GACCqC,UACAC,SAAUC,EACV9B,KAAMuB,EACNxB,MAAOA,EACPE,MAAOC,0BAAYuB,MAAOF,EAAKE,MAAOD,OAAQD,EAAKC,SACnDV,EAAGO,EACHN,EAAGO,MAIT"}